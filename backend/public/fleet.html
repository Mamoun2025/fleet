<!DOCTYPE html>
<html lang="fr" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">Fleet Management</title>
    
    <!-- Police Google Font Inter pour un look premium -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- V√©rification d'authentification -->
    <script>
        // Rediriger vers la page de connexion si non connect√©
        document.addEventListener('DOMContentLoaded', function() {
            const token = localStorage.getItem('token');
            const demoMode = localStorage.getItem('demoMode');
            const isAdmin = localStorage.getItem('isAdmin');
            const currentFleetId = localStorage.getItem('currentFleetId');
            
            // Si pas de token et pas en mode d√©mo, rediriger vers login
            if (!token && demoMode !== 'true') {
                window.location.href = 'login.html';
                return;
            }
            
            // Si admin sans flotte, rediriger vers la page d'administration
            if (isAdmin === 'true' && !currentFleetId && demoMode !== 'true') {
                window.location.href = 'admin.html';
                return;
            }
            
            // Si utilisateur normal sans flotte, rediriger vers login
            if (!isAdmin && !currentFleetId && demoMode !== 'true') {
                localStorage.removeItem('token'); // Token invalide ou expir√©
                window.location.href = 'login.html';
                return;
            }
        });
    </script>
    
    <!-- DaisyUI et TailwindCSS -->
    <link href="https://cdn.jsdelivr.net/npm/daisyui@3.9.4/dist/full.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'steel-blue': '#4682B4',
                        'night-blue': '#003366',
                        'off-white': '#F5F7FA',
                        'deep-gray': '#2C3E50'
                    },
                    fontFamily: {
                        'sans': ['Inter', 'sans-serif'],
                    },
                    boxShadow: {
                        'soft': '0 4px 12px rgba(0, 0, 0, 0.05)',
                        'premium': '0 8px 24px rgba(0, 0, 0, 0.08)'
                    }
                }
            }
        }
    </script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- Navigation Components -->
    <link href="fleet-nav.css" rel="stylesheet">
    
    <!-- Tabulator pour tableau avanc√© -->
    <link href="https://unpkg.com/tabulator-tables@5.5.0/dist/css/tabulator.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables@5.5.0/dist/js/tabulator.min.js"></script>
    
    <!-- SheetJS (XLSX) pour l'import Excel -->
    <script src="https://cdn.sheetjs.com/xlsx-0.18.5/package/dist/xlsx.full.min.js"></script>
    
    <!-- CSS personnalis√© -->
    <link href="fleetstyle.css" rel="stylesheet">
    
    <!-- Module de synchronisation -->
    <script src="fleet-sync.js"></script>
</head>
<body>
    <!-- Navbar avec informations utilisateur et synchronisation -->
    <div class="navbar bg-base-100 shadow-soft">
        <div class="flex-1">
            <button id="drawer-toggle-btn" class="btn btn-ghost btn-sm rounded-full mr-2 hover:bg-gray-100">
                <i data-lucide="menu" class="w-5 h-5 text-night-blue"></i>
            </button>
            <span id="section-title" class="font-medium text-steel-blue text-lg">Ma Flotte</span>
        </div>
        <div class="flex items-center space-x-2">
            <!-- Indicateur de synchronisation -->
            <div id="sync-status" class="tooltip tooltip-bottom" data-tip="Derni√®re synchronisation: jamais">
                <button id="sync-now-btn" class="btn btn-ghost btn-xs">
                    <i data-lucide="refresh-cw" class="w-4 h-4"></i>
                    <span id="sync-text" class="ml-1 text-xs">Sync</span>
                </button>
            </div>
            
            <!-- Bouton Sauvegarder -->
            <div class="tooltip tooltip-bottom" data-tip="Sauvegarder les modifications">
                <button id="save-fleet-button" class="btn btn-ghost btn-xs">
                    <i data-lucide="save" class="w-4 h-4"></i>
                </button>
            </div>
            
            <!-- Indicateur de mode d√©mo -->
            <div id="demo-mode-indicator" class="hidden">
                <span class="badge badge-warning badge-sm">Mode D√©mo</span>
            </div>
            
            <!-- Menu utilisateur -->
            <div class="dropdown dropdown-end">
                <div class="navbar-center">
                    <div class="btn btn-ghost normal-case text-xl">
                        <span id="fleet-name">Fleet</span>
                        <span id="demo-badge" class="badge badge-warning ml-2 hidden">D√âMO</span>
                    </div>
                </div>
                <ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52">
                    <li><a id="profile-link"><i data-lucide="user" class="w-4 h-4"></i> Profil</a></li>
                    <li><a id="logout-link"><i data-lucide="log-out" class="w-4 h-4"></i> D√©connexion</a></li>
                </ul>
            </div>
        </div>
    </div>
    
    <!-- Section recherche et filtres -->
    <div class="search-section">
        <div class="flex flex-wrap gap-3 items-center">
            <!-- Recherche am√©lior√©e avec style premium -->
            <div class="relative flex-grow max-w-md">
                <input type="text" id="search-input" placeholder="Rechercher..." class="input input-bordered w-full pr-10 bg-off-white border-0 shadow-soft focus:shadow-premium transition-all duration-300">
                <button id="clear-search" class="absolute right-2 top-1/2 -translate-y-1/2 btn btn-ghost btn-xs opacity-70 hover:opacity-100" style="display: none;">
                    <i data-lucide="x" class="w-4 h-4"></i>
                </button>
            </div>
            
            <!-- Bouton Activer modification -->
            <button class="btn btn-sm btn-outline shadow-soft" id="edit-mode-btn">
                <i data-lucide="edit-3" class="w-4 h-4 mr-1"></i> Activer modification
            </button>
            
            <!-- Boutons d'action -->
            <div class="flex space-x-3">
                <button class="btn btn-sm btn-outline shadow-soft" id="import-btn">
                    <i data-lucide="upload" class="w-4 h-4 mr-1"></i> Import Excel
                </button>
                <button class="btn btn-sm btn-outline shadow-soft" id="export-btn">
                    <i data-lucide="download" class="w-4 h-4 mr-1"></i> Export Excel
                </button>
                <!-- Bouton Sauvegarder d√©plac√© en haut √† c√¥t√© du bouton Sync -->
                <button id="delete-selected-button" class="btn btn-sm btn-outline btn-error shadow-soft" disabled>
                    <i data-lucide="trash-2" class="w-4 h-4 mr-1"></i> Supprimer
                </button>
            </div>
            
            <!-- Bouton NOUVEAU avec style premium -->
            <button class="btn btn-sm btn-primary shadow-premium" id="add-btn">
                <i data-lucide="plus" class="w-4 h-4 mr-1"></i> NOUVEAU
            </button>
            
            <!-- Bouton COLONNES supprim√© -->

        </div>
    </div>
    
    <!-- Conteneur du tableau -->
    <div class="table-container">
        <div id="machines-table"></div>
    </div>
    
    <!-- Modal pour l'import Excel -->
    <div id="import-modal" class="custom-modal">
        <div class="custom-modal-overlay" id="import-modal-overlay"></div>
        <div class="custom-modal-content">
            <div class="custom-modal-header">
                <h3 class="font-bold text-lg mb-4 flex items-center">
                    <i data-lucide="file-spreadsheet" class="w-5 h-5 mr-2"></i>
                    Import de donn√©es Excel
                </h3>
            </div>
            
            <div class="mb-4">
                <p class="mb-2">S√©lectionnez un fichier Excel (.xlsx) √† importer :</p>
                <p class="text-sm text-gray-600 mb-4">Les en-t√™tes de colonnes doivent correspondre aux champs d√©finis dans fleet_fields.xlsx</p>
                <div class="alert alert-warning mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" /></svg>
                    <span>La colonne <strong>ID</strong> est <strong>obligatoire</strong> et doit contenir des valeurs num√©riques uniques pour chaque ligne.</span>
                </div>
                
                <input type="file" id="excel-file" accept=".xlsx" class="file-input file-input-bordered w-full" />
                
                <div class="mt-4">
                    <div class="form-control">
                        <label class="label cursor-pointer">
                            <span class="label-text">Mettre √† jour les donn√©es existantes (bas√© sur ID)</span>
                            <input type="checkbox" id="prevent-duplicates" class="checkbox" checked />
                        </label>
                    </div>
                </div>
                
                <div class="alert alert-info mt-4 hidden" id="import-preview">
                    <div>
                        <span id="preview-count">0</span> enregistrements trouv√©s dans le fichier.
                        <div id="duplicate-count-container" class="hidden">
                            <span id="duplicate-count">0</span> enregistrements existants seront mis √† jour.
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="modal-action mt-4">
                <button class="btn btn-sm" id="preview-import-btn" disabled>Aper√ßu</button>
                <button class="btn btn-primary" id="confirm-import-btn" disabled>Importer</button>
                <button class="btn btn-outline" id="cancel-import-btn">Annuler</button>
            </div>
        </div>
    </div>
    
    <!-- Agent IA Deadalia -->
    <div id="deadalia-container" class="fixed bottom-4 right-4 z-50">
        <!-- Bouton principal Deadalia -->
        <div class="relative">
            <button id="deadalia-btn" class="btn btn-circle btn-lg bg-gradient-to-r from-purple-600 to-blue-600 text-white shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105">
                <img src="deadalia-icon.svg" alt="Deadalia" class="w-8 h-8 rounded-full" id="deadalia-avatar">
                <div id="voice-indicator" class="absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full animate-pulse hidden"></div>
            </button>
            
            <!-- Status tooltip -->
            <div id="deadalia-status" class="absolute bottom-full right-0 mb-2 px-3 py-1 bg-gray-800 text-white text-sm rounded-lg opacity-0 transition-opacity duration-200 whitespace-nowrap">
                Cliquez pour parler √† Deadalia
            </div>
        </div>
        
        <!-- Chat drawer (cach√© par d√©faut) -->
        <div id="chat-drawer" class="absolute bottom-16 right-0 w-80 bg-white rounded-lg shadow-2xl border border-gray-200 transform translate-y-4 opacity-0 transition-all duration-300 pointer-events-none">
            <!-- Header du chat -->
            <div class="flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-t-lg">
                <div class="flex items-center space-x-2">
                    <img src="deadalia-icon.svg" alt="Deadalia" class="w-6 h-6 rounded-full">
                    <span class="font-medium">Deadalia</span>
                    <div id="chat-status" class="w-2 h-2 bg-green-400 rounded-full"></div>
                </div>
                <button id="close-chat" class="text-white hover:text-gray-200 transition-colors">
                    <i data-lucide="x" class="w-4 h-4"></i>
                </button>
            </div>
            
            <!-- Zone de chat -->
            <div id="chat-messages" class="h-64 overflow-y-auto p-4 space-y-3">
                <div class="flex items-start space-x-2">
                    <img src="deadalia-icon.svg" alt="Deadalia" class="w-6 h-6 rounded-full flex-shrink-0 mt-1">
                    <div class="bg-gray-100 rounded-lg p-3 max-w-xs">
                        <p class="text-sm text-gray-800">Bonjour ! Je suis Deadalia, votre assistante IA pour la gestion de flotte. Posez-moi vos questions !</p>
                    </div>
                </div>
            </div>
            
            <!-- Zone de saisie -->
            <div class="p-4 border-t border-gray-200">
                <div class="flex items-center space-x-2">
                    <button id="voice-btn" class="btn btn-sm btn-circle bg-purple-600 text-white hover:bg-purple-700 transition-colors">
                        <i data-lucide="mic" class="w-4 h-4"></i>
                    </button>
                    <input type="text" id="text-input" placeholder="Tapez votre question..." class="input input-sm flex-1 border-gray-300">
                    <button id="send-btn" class="btn btn-sm btn-circle bg-blue-600 text-white hover:bg-blue-700 transition-colors">
                        <i data-lucide="send" class="w-4 h-4"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal vocale (optionnel pour interaction √©tendue) -->
    <div id="voice-modal" class="modal">
        <div class="modal-box max-w-md">
            <div class="text-center">
                <img src="deadalia-icon.svg" alt="Deadalia" class="w-16 h-16 rounded-full mx-auto mb-4">
                <h3 class="font-bold text-lg mb-2">Deadalia vous √©coute</h3>
                <div id="voice-animation" class="flex justify-center items-center space-x-1 mb-4">
                    <div class="w-2 h-8 bg-purple-600 rounded-full animate-pulse"></div>
                    <div class="w-2 h-12 bg-blue-600 rounded-full animate-pulse" style="animation-delay: 0.1s"></div>
                    <div class="w-2 h-6 bg-purple-600 rounded-full animate-pulse" style="animation-delay: 0.2s"></div>
                    <div class="w-2 h-10 bg-blue-600 rounded-full animate-pulse" style="animation-delay: 0.3s"></div>
                    <div class="w-2 h-4 bg-purple-600 rounded-full animate-pulse" style="animation-delay: 0.4s"></div>
                </div>
                <p id="voice-text" class="text-gray-600 mb-4">Parlez maintenant...</p>
                <div class="modal-action">
                    <button id="stop-voice" class="btn btn-error">Arr√™ter</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Toast container pour les notifications -->
    <div id="toast-container" class="toast toast-top toast-end"></div>

    <!-- Scripts -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://unpkg.com/tabulator-tables@6.2.1/dist/js/tabulator.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <script src="fleet-sync.js"></script>
    <script src="fleet-core.js"></script>
    <script src="fleet-operations.js"></script>
    <script src="fleet-drawer.js"></script>
    
    <!-- Scripts IA Deadalia -->
    <link rel="stylesheet" href="ia/css/chat.css">
    <script src="ia/js/voice.js"></script>
    <script src="ia/js/query.js"></script>
    <script src="ia/js/respond.js"></script>
    <script src="ia/js/init.js"></script>
    
    <!-- Initialisation Deadalia et Synchronisation -->
    <script>
        // Attendre que tous les scripts soient charg√©s
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ü§ñ Initialisation de Deadalia et synchronisation...');
            
            // Initialiser l'interface utilisateur
            initUserInterface();
            
            // V√©rifier si l'utilisateur est connect√©
            const token = localStorage.getItem('token');
            const demoMode = localStorage.getItem('demoMode') === 'true';
            const currentFleetId = localStorage.getItem('currentFleetId');
            const currentFleetName = localStorage.getItem('currentFleetName');
            
            if (!token && !demoMode) {
                // Rediriger vers la page de connexion si non connect√©
                window.location.href = 'login.html';
            } else if (!currentFleetId) {
                // Cr√©er une flotte temporaire si aucune n'est s√©lectionn√©e
                localStorage.setItem('currentFleetId', 'temp-' + Date.now());
                localStorage.setItem('currentFleetName', 'Ma Flotte');
                // Recharger la page pour utiliser cette flotte
                window.location.reload();
            }
            
            // Afficher l'indicateur de mode d√©mo si n√©cessaire
            if (demoMode) {
                document.getElementById('demo-mode-indicator').classList.remove('hidden');
            }
            
            // Mettre √† jour le nom d'utilisateur
            updateUserName();
            
            // Configurer le bouton de d√©connexion
            document.getElementById('logout-link').addEventListener('click', function(e) {
                e.preventDefault();
                logout();
            });
            
            // Configurer la synchronisation
            if (window.fleetSync && !demoMode && currentFleetId) {
                // Initialiser la synchronisation
                console.log('Initialisation de la synchronisation pour la flotte:', currentFleetId);
                window.fleetSync.initSync(currentFleetId);
                
                // √âv√©nement de synchronisation manuelle
                document.getElementById('sync-now-btn').addEventListener('click', function() {
                    syncNow();
                });
                
                // Mettre √† jour l'indicateur de synchronisation
                updateSyncStatus();
            } else if (demoMode) {
                // Mode d√©mo
                document.getElementById('sync-status').setAttribute('data-tip', 'Mode d√©mo (pas de synchronisation)');
                document.getElementById('sync-text').textContent = 'D√©mo';
                document.getElementById('sync-now-btn').disabled = true;
                document.getElementById('sync-now-btn').classList.add('btn-disabled');
            }
            
            // Initialiser Deadalia
            if (typeof DeadaliaAI !== 'undefined') {
                try {
                    window.deadalia = new DeadaliaAI();
                    console.log('‚úÖ Deadalia initialis√© avec succ√®s!');
                } catch (error) {
                    console.error('‚ùå Erreur lors de l\'initialisation de Deadalia:', error);
                }
            } else {
                console.error('‚ùå Classe DeadaliaAI non trouv√©e. V√©rifiez le chargement des scripts.');
            }
        });
        
        // Initialiser l'interface utilisateur
        function initUserInterface() {
            // Afficher le nom de la flotte dans le titre
            const fleetTitle = document.getElementById('fleet-title');
            const fleetName = localStorage.getItem('currentFleetName');
            if (fleetName) {
                fleetTitle.textContent = fleetName;
                document.getElementById('page-title').textContent = `Fleet - ${fleetName}`;
            } else {
                fleetTitle.textContent = 'Ma Flotte';
            }
            
            // Configurer le bouton de d√©connexion
            document.getElementById('logout-link').addEventListener('click', function(e) {
                e.preventDefault();
                logout();
            });
            
            // Afficher le nom d'utilisateur
            updateUserName();
        }
        
        // Synchroniser maintenant
        function syncNow() {
            const syncBtn = document.getElementById('sync-now-btn');
            const syncText = document.getElementById('sync-text');
            
            // D√©sactiver le bouton pendant la synchronisation
            syncBtn.disabled = true;
            syncBtn.classList.add('btn-disabled');
            syncText.textContent = 'Synchro...';
            
            // Animation de synchronisation
            const icon = syncBtn.querySelector('i');
            icon.classList.add('animate-spin');
            
            // Lancer la synchronisation
            fleetSync.syncWithServer()
                .then(result => {
                    console.log('Synchronisation termin√©e:', result);
                    updateSyncStatus();
                })
                .catch(error => {
                    console.error('Erreur de synchronisation:', error);
                    showSyncError();
                })
                .finally(() => {
                    // R√©activer le bouton
                    syncBtn.disabled = false;
                    syncBtn.classList.remove('btn-disabled');
                    syncText.textContent = 'Sync';
                    icon.classList.remove('animate-spin');
                });
        }
        
        // Mettre √† jour le statut de synchronisation
        function updateSyncStatus() {
            const syncStatus = document.getElementById('sync-status');
            const lastSync = localStorage.getItem('lastSyncTimestamp');
            
            if (lastSync) {
                const date = new Date(lastSync);
                const formattedDate = date.toLocaleDateString('fr-FR', { 
                    day: '2-digit', 
                    month: '2-digit',
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
                syncStatus.setAttribute('data-tip', 'Derni√®re synchronisation: ' + formattedDate);
            } else {
                syncStatus.setAttribute('data-tip', 'Jamais synchronis√©');
            }
        }
        
        // Afficher une erreur de synchronisation
        function showSyncError() {
            const notification = document.createElement('div');
            notification.className = 'alert alert-error fixed bottom-4 left-4 w-auto max-w-sm z-50';
            notification.innerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                <span>Erreur de synchronisation. Veuillez r√©essayer.</span>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }
        
        // Mettre √† jour les informations utilisateur et flotte
        function updateUserName() {
            const token = localStorage.getItem('token');
            const demoMode = localStorage.getItem('demoMode') === 'true';
            const userInitial = document.getElementById('user-initial');
            const fleetNameElement = document.getElementById('fleet-name');
            const fleetTitleElement = document.getElementById('fleet-title');
            const demoBadge = document.getElementById('demo-badge');
            
            // Afficher le badge d√©mo si n√©cessaire
            if (demoMode) {
                userInitial.textContent = 'D';
                demoBadge.classList.remove('hidden');
                fleetNameElement.textContent = 'Mode D√©mo';
                fleetTitleElement.textContent = 'Mode D√©mo';
                return;
            } else {
                demoBadge.classList.add('hidden');
            }
            
            // R√©cup√©rer les informations depuis le localStorage
            const clientName = localStorage.getItem('clientName');
            const companyName = localStorage.getItem('companyName');
            const fleetName = localStorage.getItem('currentFleetName');
            
            // Mettre √† jour l'interface avec les informations disponibles
            if (clientName) {
                userInitial.textContent = clientName.charAt(0).toUpperCase();
            } else {
                userInitial.textContent = 'U';
            }
            
            if (fleetName) {
                fleetNameElement.textContent = fleetName;
                fleetTitleElement.textContent = fleetName;
            }
            
            // Si on a un token, v√©rifier les informations via l'API
            if (token) {
                // R√©cup√©rer les informations du client depuis l'API
                fetch('/api/auth/verify', {
                    method: 'GET',
                    headers: {
                        'x-auth-token': token
                    }
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Token invalide');
                    }
                    return response.json();
                })
                .then(client => {
                    // Mettre √† jour les informations du client
                    if (client && client.name) {
                        userInitial.textContent = client.name.charAt(0).toUpperCase();
                        localStorage.setItem('clientName', client.name);
                    }
                    
                    // Mettre √† jour les informations de l'entreprise et de la flotte
                    if (client.company && client.company.name) {
                        localStorage.setItem('companyName', client.company.name);
                    }
                    
                    if (client.fleet && client.fleet.name) {
                        fleetNameElement.textContent = client.fleet.name;
                        fleetTitleElement.textContent = client.fleet.name;
                        localStorage.setItem('currentFleetName', client.fleet.name);
                    }
                })
                .catch(error => {
                    console.error('Erreur lors de la r√©cup√©ration des informations du client:', error);
                    userInitial.textContent = 'U';
                });
            } else {
                userInitial.textContent = 'U';
            }
        }
        
        // D√©connexion
        function logout() {
            // Supprimer toutes les informations d'authentification et de session
            localStorage.removeItem('token');
            localStorage.removeItem('currentClientId');
            localStorage.removeItem('clientName');
            localStorage.removeItem('currentCompanyId');
            localStorage.removeItem('companyName');
            localStorage.removeItem('currentFleetId');
            localStorage.removeItem('currentFleetName');
            localStorage.removeItem('isAdmin');
            localStorage.removeItem('demoMode');
            localStorage.removeItem('lastSyncTimestamp');
            
            // Rediriger vers la page de connexion
            window.location.href = 'login.html';
        }
    </script>
    
    <!-- Scripts principaux de l'application -->
    <script src="fleet-core.js"></script>
    <script src="fleet-operations.js"></script>
    
    <script>
        // Initialiser les ic√¥nes Lucide apr√®s le chargement de la page
        document.addEventListener('DOMContentLoaded', function() {
            lucide.createIcons();
        });
    </script>
</body>
</html>
